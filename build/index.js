(()=>{var e,n={758:(e,n,t)=>{"use strict";const o=window.wp.blocks,i=window.React,d=window.wp.i18n,a=window.wp.blockEditor,s=JSON.parse('{"UU":"create-block/emb-org"}');var r=t(722),l=t.n(r),c=t(417),p=t.n(c);(0,o.registerBlockType)(s.UU,{edit:function(){return(0,i.createElement)("p",{...(0,a.useBlockProps)()},(0,d.__)("Organograma Embratur","emb-org"))},organograma:l(),video:p(),save:function(){return null}})},722:()=>{document.addEventListener("DOMContentLoaded",(async function(){const e=document.body,n=(document.head,document.createElement("script"));n.src="https://d3js.org/d3.v7.min.js",n.onload=function(){console.log("D3 carregado");const n=document.createElement("script");n.src="https://cdn.jsdelivr.net/npm/d3-org-chart@2.6.0",n.onload=function(){console.log("D3 Org Chart carregado");const n=document.createElement("script");n.src="https://cdn.jsdelivr.net/npm/d3-flextree@2.1.2/build/d3-flextree.js",n.onload=function(){console.log("D3 Flextree carregado")},e.appendChild(n)},e.appendChild(n)},e.appendChild(n);const t=document.createElement("link");t.rel="stylesheet",t.href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css",e.appendChild(t);const o=document.getElementById("organograma-container");o&&(console.log("Container obtido."),console.log("Obtendo dados da API..."),await fetch("/wp-json/emb-org/v1/membros/").then((e=>e.json())).then((n=>{const[t,i]=d3.extent(n,(e=>e.value)),d=d3.scaleSqrt().domain([t,i]).range([10,100]);n.forEach((e=>{e._radius=Math.round(10*d(e.value))/10})),console.log("Dados recebidos:",n),function(n,t){if(!t||!t.length)return console.log("Nenhum membro encontrado."),void(n.innerHTML="<p>Nenhum membro encontrado.</p>");console.log("Iniciando a criação do organograma com dados:",t),console.log("TESTE");let o=(new d3.OrgChart).compact(!1);o.layoutBindings().top.linkY=e=>e.y-24,o.container(n).svgHeight(window.innerHeight).data(t&&t).nodeHeight((e=>200)).nodeWidth((e=>300)).childrenMargin((e=>100)).compactMarginBetween((e=>100)).compactMarginPair((e=>100)).neightbourMargin(((e,n)=>25)).siblingsMargin((e=>25)).onNodeClick((e=>{(function(e){const n=function(e){return i.find((n=>n.id===e))}(e);n&&(d=n,r())})(e),r(),a.style.display="flex"})).buttonContent((({node:e,state:n})=>`<div style="position: relative; color:#565656;border-radius:3px;padding:6px;font-size:10px;margin:auto auto;background-color:#D9D9D9;border: 1px solid #E4E2E9"> <span style="font-size:9px">${e.children?'<i class="fas fa-angle-up"></i>':'<i class="fas fa-angle-down"></i>'}</span></div>`)).linkUpdate((function(e,n,t){d3.select(this).attr("stroke",(e=>e.data._upToTheRootHighlighted?"#152785":"#E4E2E9")).attr("stroke-width",(e=>e.data._upToTheRootHighlighted?5:1)),e.data._upToTheRootHighlighted&&d3.select(this).raise()})).nodeContent((function(e,n,t,o){const i="presidencia"===e.data.composition,d="diretoria_de_gestao_e_inovacao"===e.data.composition,a="diretoriai_de_marketing_internacional"===e.data.composition;return`\n            <div class="container" style="font-family: 'Raleway', sans-serif; font-weight:700; ;background-color:#FFFFFF; position:absolute;margin-top:-1px; margin-left:-1px;width:${e.width}px;height:${e.height}px;border-radius:20px;">\n              <div class="top-bar-container">\n\t\t\t\t\t\t\t\t<div style="background-color: ${(i?"#0165B1":d&&"#107b49")||a&&"#FCD900"}" class="top-bar"></div>\n              </div>\n              <div style="display: flex; justify-content: center;">\n                <img src="${e.data.img_url}" style="position: absolute; margin-top: -50px; border-radius: 100px; width: 100px; height: 100px; object-fit: cover; border: 4px solid white;" />\n              </div>\n              <div style="height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 0 1rem;">\n                <div style="font-size:20px; color:#4B4B4B; text-align: center; line-height: 25.2px;"> ${e.data.first_name}</div>\n                <div style="color:#909090; font-size:16px; font-weight: 400; line-height: 18.4px; text-align: center;"> ${e.data.department_name} </div>\n              </div>\n           </div>\n\n           <style>\n            .container {\n              width: 300px;\n              height: 300px;\n              position: relative;\n              background-color: #fff;\n              box-shadow: 0px 4px 4px 0px #00000040;\n\n            }\n\n            .top-bar-container {\n              width: 100%;\n              height: 20px;\n              position: absolute;\n              top: 0;\n              overflow: hidden;\n              border-top-left-radius: 20px;\n              border-top-right-radius: 20px;\n            }\n\n            .top-bar {\n              width: 100%;\n              height: 7px;\n              background-color: #0165B1;\n            }\n\n            .btn {\n              margin: 3px;\n              color: inherit;\n              text-transform: uppercase;\n              word-wrap: break-word;\n              white-space: normal;\n              cursor: pointer;\n              border: 0;\n              border-radius: 0.125rem;\n              -webkit-box-shadow: 0 2px 5px 0 rgb(0 0 0 / 16%),\n                0 2px 10px 0 rgb(0 0 0 / 12%);\n              box-shadow: 0 2px 5px 0 rgb(0 0 0 / 16%), 0 2px 10px 0 rgb(0 0 0 / 12%);\n              -webkit-transition: color 0.15s ease-in-out,\n                background-color 0.15s ease-in-out, border-color 0.15s ease-in-out,\n                -webkit-box-shadow 0.15s ease-in-out;\n              transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out,\n                border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\n              transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out,\n                border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n              transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out,\n                border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out,\n                -webkit-box-shadow 0.15s ease-in-out;\n              padding: 0.84rem 2.14rem;\n              font-size: 0.81rem;\n              display: inline-block;\n              font-weight: 400;\n              color: #212529;\n              text-align: center;\n              vertical-align: middle;\n              -webkit-user-select: none;\n              -moz-user-select: none;\n              -ms-user-select: none;\n              user-select: none;\n              border: 1px solid transparent;\n              padding: 0.375rem 0.75rem;\n              font-size: 1rem;\n              line-height: 1.5;\n              border-radius: 0.25rem;\n            }\n\n            .btn-action-button {\n              text-transform: lowercase;\n              font-size: 11px !important;\n              border-radius: 7px !important;\n              color: white !important;\n              padding: 4px 5px !important;\n              background-color: #0165B1 !important;\n            }\n\n            .action-buttons {\n              position: absolute;\n              top: 10px;\n              right: 35px;\n            }\n\n            .svg-chart-container {\n              background-color: #fff;\n            }\n\n            .svg-chart-container:before {\n              content: '';\n              position: absolute;\n              left: 0;\n              right: 0;\n              top: 0;\n              bottom: 0;\n              background: radial-gradient(circle at center, #04192b 0, #000b0e 100%);\n            }\n\n          </style>\n  `})).render(),console.log("Organograma criado com sucesso.");let i=t,d=null;const a=document.createElement("div");a.id="modalBackground",a.style.display="none",e.appendChild(a),console.log("Modalbackground criado");const s=document.createElement("div");function r(){d&&(document.getElementById("title").textContent=d.first_name,document.getElementById("department").textContent=d.department_name,document.getElementById("body").textContent=d.bio,document.getElementById("movie").src=d.movie_url,document.getElementById("video").load(),d.phone&&(document.getElementById("phone").innerHTML=`<div style="display: flex; gap: 10px; font-weight: 300;"><img src="https://embratur.1md.com.br/wp-content/uploads/2024/04/phone.png" class="icone-telefone" /> ${d.phone}</div>`),d.email&&(document.getElementById("email").innerHTML=`<div style="display: flex; gap: 10px; font-weight: 300;"><img src="https://embratur.1md.com.br/wp-content/uploads/2024/04/mail.png" class="icone-telefone" /> ${d.email}</div>`))}s.id="modal",s.classList="modal",s.innerHTML='\n\t\t<div id="video-container" class="video-container">\n        <video class="video-dimmed video" id="video" height="240" preload="metadata">\n          <source id="movie" src="" type="video/mp4">\n        </video>\n        <div id="play-button" class="play-button">&#9658;</div>\n        <div id="pause-button" class="pause-button" style="display: none;">&#10074;&#10074;</div>\n        <div id="progress-container" class="progress-container">\n          <div id="progress-bar" class="progress-bar"></div>\n        </div>\n\t\t\t\t<span class="close-video">&times;</span>\n      </div>\n      <div id="content" class="content">\n        <div class="title-container">\n          <h2 id="title"></h2>\n          <span class="close">&times;</span>\n        </div>\n        <h4 id="department"></h4>\n        <span class="separator"></span>\n        <p id="body"></p>\n        <span class="separator"></span>\n        <div class="contact-container">\n          <span id="phone"></span>\n          <span id="email"></span>\n        </div>\n      </div>\n\t\t',a.appendChild(s),console.log("Modal criado"),s.querySelector(".close").addEventListener("click",(function(){a.style.display="none"})),s.querySelector(".close-video").addEventListener("click",(function(){let e=document.getElementById("video-container"),n=document.querySelector(".close-video"),t=document.getElementById("play-button"),o=document.getElementById("pause-button"),i=document.getElementById("progress-container");e.classList.add("video-container"),video.style.objectFit="cover",video.style.backgroundColor="",video.style.borderTopLeftRadius="25px",video.style.borderBottomLeftRadius="25px",n.style.display="none",video.style.position="",video.currentTime=0,video.pause(),video.classList.add("video-dimmed"),i.style.display="none",t.style.display="block",o.style.display="none"})),document.getElementById("modal"),window.onclick=function(e){e.target===a&&(a.style.display="none")}}(o,n)})).catch((e=>console.error("Erro ao buscar dados:",e)))),document.dispatchEvent(new CustomEvent("OrganogramaReady"))}))},417:()=>{document.addEventListener("OrganogramaReady",(function(){let e,n=document.getElementById("video"),t=document.getElementById("play-button"),o=document.getElementById("pause-button"),i=document.getElementById("progress-bar"),d=document.getElementById("progress-container");function a(){var n=document.getElementById("video-container"),i=document.getElementById("video");let a=document.getElementById("modal"),r=document.querySelector(".close-video");i.paused?(a.style.borderRadius="25px",a.style.overflow="hidden",n.classList.remove("video-container"),i.style.width="100%",i.style.position="absolute",i.style.objectFit="contain",i.play(),i.classList.remove("video-dimmed"),r.style.display="flex",r.style.position="absolute",r.style.zIndex="99999",r.style.top="1.3rem",r.style.right="2rem",t.style.display="none",o.style.display="block",d.style.display="block",s()):(i.pause(),i.classList.add("video-dimmed"),t.style.display="block",o.style.display="none",clearTimeout(e))}function s(){clearTimeout(e),e=setTimeout((function(){n.paused||(o.style.display="none")}),3e3)}t.addEventListener("click",a),o.addEventListener("click",a),n.addEventListener("timeupdate",(function(){let e=n.currentTime/n.duration*100;i.style.width=e+"%"})),d.addEventListener("click",(function(e){let t=e.offsetX/d.offsetWidth*n.duration;n.currentTime=t})),n.addEventListener("click",a),n.addEventListener("mousemove",(function(){n.paused||(o.style.display="block",s())})),n.addEventListener("mouseleave",(function(){n.paused||(o.style.display="none")})),n.addEventListener("ended",(function(){let e=document.getElementById("video-container"),i=(document.getElementById("content"),document.getElementById("modal"),document.querySelector(".close-video"));e.classList.add("video-container"),n.style.objectFit="cover",n.style.backgroundColor="",n.style.borderTopLeftRadius="25px",n.style.borderBottomLeftRadius="25px",i.style.display="none",n.style.position="",n.currentTime=0,n.pause(),n.classList.add("video-dimmed"),d.style.display="none",t.style.display="block",o.style.display="none"})),o.addEventListener("mouseenter",(function(){clearTimeout(e)})),o.addEventListener("mouseleave",(function(){n.paused||s()}))}))}},t={};function o(e){var i=t[e];if(void 0!==i)return i.exports;var d=t[e]={exports:{}};return n[e](d,d.exports,o),d.exports}o.m=n,e=[],o.O=(n,t,i,d)=>{if(!t){var a=1/0;for(c=0;c<e.length;c++){for(var[t,i,d]=e[c],s=!0,r=0;r<t.length;r++)(!1&d||a>=d)&&Object.keys(o.O).every((e=>o.O[e](t[r])))?t.splice(r--,1):(s=!1,d<a&&(a=d));if(s){e.splice(c--,1);var l=i();void 0!==l&&(n=l)}}return n}d=d||0;for(var c=e.length;c>0&&e[c-1][2]>d;c--)e[c]=e[c-1];e[c]=[t,i,d]},o.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return o.d(n,{a:n}),n},o.d=(e,n)=>{for(var t in n)o.o(n,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},o.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{var e={57:0,350:0};o.O.j=n=>0===e[n];var n=(n,t)=>{var i,d,[a,s,r]=t,l=0;if(a.some((n=>0!==e[n]))){for(i in s)o.o(s,i)&&(o.m[i]=s[i]);if(r)var c=r(o)}for(n&&n(t);l<a.length;l++)d=a[l],o.o(e,d)&&e[d]&&e[d][0](),e[d]=0;return o.O(c)},t=globalThis.webpackChunkemb_org=globalThis.webpackChunkemb_org||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))})();var i=o.O(void 0,[350],(()=>o(758)));i=o.O(i)})();